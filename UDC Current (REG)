#!/bin/bash
# Version number
VERSION="v6.2"

# Set log file paths
LOGFILE="/home/logs/UDC/UpdateNClean.log-$(date +%m.%d.%y)"
LOGFILE2="/home/logs/rkhunter/RKhunter.log-$(date +%m.%d.%y)"
LOGFILE3="/home/logs/clamav/ClamAV.log-$(date +%m.%d.%y)"
ERRORLOG="/home/logs/UDC/UDC-ERRORS/UDC-ERROR-Log-$(date +%m.%d.%y_%H.%M.%S)"

# Initialize error flag
ERROR_FLAG=0

# Function to log errors
log_error() {
    ERROR_FLAG=1
    echo "[UDC $VERSION ERROR LOG] $(date "+%m/%d/%Y @ %T"): $1" >> "$ERRORLOG"
}

# Function to check exit status of the previous command
check_exit_status() {
    if [ $? -eq 0 ]; then
        echo
        echo "          ^ Process Completed ^" >> "$LOGFILE"
        echo
    else
        echo
        echo "          ^ [ERROR] Process Failed! ^" >> "$LOGFILE"
        log_error "Process failed!"
        echo
    fi
}

# Rest of your script...

# Main script execution
{
    echo
    echo "==========================================="
    echo "       -:: Update & Clean $VERSION ::-"
    echo "==========================================="
    echo
    echo "[UDC $VERSION LOG] $(date "+%m/%d/%Y @ %T") : ******** Update & Clean Script Started! ********" >> "$LOGFILE"
    echo

    # ... Include the main execution block that calls the functions as needed ...

    leave

    # Only produce an error log if errors have occurred
    if [ $ERROR_FLAG -eq 1 ]; then
        echo "[UDC $VERSION ERROR LOG] $(date "+%m/%d/%Y @ %T") : ******** Update & Clean Script Completed with ERRORS! ********" >> "$LOGFILE"
    else
        echo "[UDC $VERSION LOG] $(date "+%m/%d/%Y @ %T") : ******** Update & Clean Script Completed Successfully! ********" >> "$LOGFILE"
    fi

    echo
    echo "---------------------------"
    echo "          *fin*            "
    echo "---------------------------"
    echo
}
